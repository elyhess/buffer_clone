
<div id="automated_tweets">
<div class="mb-3 card card-body">
  <div class="me-4">
      <%= image_tag automated_tweet.twitter_account.image, class: "rounded-circle" %>
      <%= link_to "@#{automated_tweet.twitter_account.username}", "https://twitter.com/#{automated_tweet.twitter_account.username}", target: :_blank %><br>
      <%= button_to "Delete", automated_tweet_path(automated_tweet), method: :delete %>
      <div class="mt-3">
        Theme: <%= automated_tweet.body %><br>

        <% if automated_tweet.completed? %>
          This operation ran for <%= automated_tweet.total_tweets.round(0) %> hours.<br>
          <%= automated_tweet.total_tweets.round(0) %> tweets posted. <br>
          Click <%= link_to "here", "https://twitter.com/#{automated_tweet.twitter_account.username}", target: :_blank %> to see your tweets.
        <% else %>
          Running until <%= l automated_tweet.stop_at, format: :long %><br>

          <%= automated_tweet.tweet_count %> / <%= automated_tweet.total_tweets.ceil %> tweets posted.

          <div class="progress progress-striped active">
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
              <%= automated_tweet.tweet_count %>
            </div>
          </div>

          <script>
            valuer = 0;

            function addProgress(){
                if ((`<%= 1 + automated_tweet.tweet_count %>`) === (`<%= automated_tweet.total_tweets.ceil %>`)) {
                  window.location.reload();
                } else {
                  valuer = valuer + parseInt(`<%= 100 / automated_tweet.total_tweets.ceil %>`);
                  $('.progress-bar').css('width', valuer+'%').attr('aria-valuenow', valuer);
                  }
                }
          </script>


      </div>
    <% end %>
  </div>
</div>

</div>
